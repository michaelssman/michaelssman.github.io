# XMPP

## XMPP的基本结构

1. XMPP是一个典型的C/S架构
2. XMPP中定义了三个角色，客户端，服务器，网关
3. 服务器同时承担了客户端信息记录，连接管理和信息的路由功能
4. 基本的网络形式是单客户端通过TCP/IP连接到单服务器，然后在之上传输XML流

## XMPP工作原理

1. 节点连接到服务器
2. 服务器利用本地目录系统中的证书对其认证
3. 节点指定目标地址，让服务器告知目标状态
4. 服务器查找、连接并进行相互认证
5. 节点之间进行交互

## XMPP的优缺点

1. 优点：开放、安全、分散、可扩展
2. 缺点：数据负载过重XML、没有二进制传输

## Openfire

1. XMPP协议的服务器实现开源框架

2. 通过配置Openfifire服务器管理平台实现XMPP协议中的功能

3. Openfifire服务器管理平台需要配置⼀个进⾏数据存储的数据库

## 注册、登录

常⽤的类

1. XMPPStream(通道管理对象) 

2. XMPPJID(账号对象) 

3. XMPPPresence(上线状态对象)

## 好友、聊天

常⽤的类

1. XMPPStream(通信管道管理对象) 

2. XMPPRoster(好友花名册管理对象) 

3. XMPPJID(账号对象) 

4. XMPPMessageArchivingCoreDataStorage(聊天消息持久化存储对象)

多账号登录：source





































































































































































































































































