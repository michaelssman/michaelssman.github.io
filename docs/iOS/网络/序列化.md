# 序列化

## 请求头的序列化

![image.png](https://upload-images.jianshu.io/upload_images/1892989-723c2cf9d58b5b53.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

文件上传是一片一片的 流的形式。 避免下载大的文件的时候内存会爆掉。

流：
inputstream  （读文件到内存）
outputstream  （从内存读到nsdata，socket，文件）
数据源：nsdata，socket，文件

一个请求报文包含3部分：
请求行 包括method，url，http版本
请求头
请求体
![image.png](https://upload-images.jianshu.io/upload_images/1892989-9dbdceb761fb4703.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)



## 响应的序列化

![image.png](https://upload-images.jianshu.io/upload_images/1892989-d27f0fe7906bd745.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

目的是请求回来的数据转换成响应的格式

![image.png](https://upload-images.jianshu.io/upload_images/1892989-7108027c408a0189.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

最后一种组合
不知道返回的是上面的哪种格式
会去判断
例：
图片格式
作用就是在子线程进行解压

![image.png](https://upload-images.jianshu.io/upload_images/1892989-198fd241117d768c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

![image.png](https://upload-images.jianshu.io/upload_images/1892989-7c681be2e3d5d415.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

第一个方法：
加图片的缓存
第二个方法：
清除图片的缓存