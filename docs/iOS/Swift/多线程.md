# 多线程

__dependencies：一个数组，保存与之依赖的任务

任务执行的条件：任务的state是否是isReady

所有的任务添加到队列中 调度的方式是：所有任务会形成一个链表

## 任务

### 1、BlockOperation

```swift
        let operation = BlockOperation{
            print(#function)
        }
        operation.start()
```

### 2、DispatchWorkItem

```swift
        let workItem = DispatchWorkItem{
            print(#function)
        }
        workItem.perform()
```

## DispatchWorkItem

```swift
    lazy var workItem : DispatchWorkItem = {
        return DispatchWorkItem{
            sleep(1)
            guard self.workItem.isCancelled == false else{
                return
            }
            print(#function)
        }
    }()

    func testWotkItem() {
        DispatchQueue.global().async(execute: workItem)
    }
```

## group组

```swift
    // MARK: 组
    func testGroup() {
        let workItem1 = DispatchWorkItem{
            print(1)
        }
        let workItem2 = DispatchWorkItem{
            print(2)
        }
        let workItem3 = DispatchWorkItem{
            print(3)
        }
        workItem1.notify(queue: .global(), execute: workItem3)//1通知执行3
        workItem2.notify(queue: .global(), execute: workItem1)//2通知执行1
        DispatchQueue.global().async(execute: workItem2)//开始执行2
//        打印结果 2 1 3
//        DispatchGroup
    }
```

