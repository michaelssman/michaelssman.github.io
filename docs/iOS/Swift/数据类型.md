# 数据类型

## String

### 初始化

```swift
///字面量
var emptyStr = ""
///初始化器
var anotherEmptyStr = String()

///是否为空串
if emptyStr.isEmpty {
  print("Nothing to see here")
}
```

### 内存存储

```swift
//变量内存地址，查看内存地址存的内容
//小字符串
var empty = "asd"
print(empty)//对于小字符串，优先直接存在内存地址里面。针对英文总共能存F（15）个字符串

//大字符串
//1. 原生字符串  地址信息+偏移量=字符串的信息
var str = "fjdksljfdsklfjdsfjhgjkhjkgsd"
```

### 字面量

```swift
///字符串字面量是被双引号包裹的固定顺序文本字符，swift会为str常量推断类型为String
let str = "some string"

///多行字面量
///多行字面量是用三个双引号扩起来的一系列字符
///多行字符串字面量把所有行包括在引号内，开始和结束默认不会有换行符
///行的末尾加反斜杠（\）就会显示行
let softWrappedQuotation = """

the wihdkjsf;klj, "fdskl
fdsf?" fkjld. \

"fkdsl;"
"""
print(softWrappedQuotation)
```

### 字符串插值

- 字符串插值是一种从混合常量、变量、字面量和表达式的字符串字面量构造新 String 值的方法

- 每一个你插入到字符串字面量的元素都要被**一对圆括号包裹，然后使用反斜杠前缀**

- 类似于 NSString 的 stringWithFormat 方法，但是更加简便，更强大

```swift
let multiplier = 3
let message = "\(multiplier) times 2.5 is \(Double(multiplier) * 2.5)"
print(message)//3 times 2.5 is 7.5
```

### 字符串索引

- 每一个 String 值都有相关的索引类型， String.Index，它相当于每个 Character 在字符串中的位置
- startIndex 属性来访问 String 中第一个 Character 的位置。 endIndex 属性就是 String中最后一个字符后的位置
- endIndex 属性并不是字符串下标脚本的合法实际参数
- 如果 String 为空，则 startIndex 与 endIndex 相等
- 使用 index(before:) 和 index(after:) 方法来访问给定索引的前后
- 要访问给定索引更远的索引，可以使用index(_:offffsetBy:)
- 使用 indices 属性来访问字符串中每个字符的索引

```swift
// MARK: String.Index 因为存储的字符是变长的，步长不一样。int和汉字不一样
var str1 = "Hello hsf"
print(str1.index(str1.startIndex, offsetBy: 1))//输出index Index类型
print(str1[str1.index(str1.startIndex, offsetBy: 1)])//输出e
print(str1[str1.index(str1.endIndex, offsetBy: -1)])//输出最后一个字符
//Index和startIndex本质 64位的位域信息
//1. encodedOffset:偏移
//2. transcoded offset
```

```swift
let greeting = "Guten Tag!"
print(greeting[greeting.startIndex])//G
print(greeting[greeting.index(before: greeting.endIndex)])//!
print(greeting[greeting.index(after: greeting.startIndex)])//u
let index = greeting.index(greeting.startIndex, offsetBy: 7)
print(greeting[index])//a
```

### 插入

- 插入字符，使用 insert(_:at:) 方法
- 插入另一个字符串的内容到特定的索引，使用 insert(contentsOf:at:) 方法

```swift
var welcome = "hello"
welcome.insert("!", at: welcome.endIndex)
welcome.insert(contentsOf: " there", at: welcome.index(before: welcome.endIndex))
```

### 删除

• 移除字符，使用 remove(at:)方法

• 移除一小段特定范围的字符串，使用 removeSubrange(_:) 方法

```swift
welcome.remove(at: welcome.index(before: welcome.endIndex))//删除最后一个字符
print(welcome)//hello there
let range = welcome.index(welcome.endIndex, offsetBy: -6)..<welcome.endIndex
welcome.removeSubrange(range)
print(welcome)//hello
```

### 子字符串

- 使用下标或者类似 prefifix(_:) 的方法得到的子字符串是 Substring 类型
- Substring 拥有 String 的大部分方法
- Substring 可以转成 String 类型
- 子字符串重用一部分原字符串的内存
- 修改字符串或者子字符串之前都不需要花费拷贝内存的代价
- String 和 Substring 都遵循 StringProtocol 协议，也就是说它基本上能很方便地兼容所有接受 StringProtocol 值的字符串操作函数

<img src="数据类型.assets/image-20221226152459761.png" alt="image-20221226152459761" style="zoom:50%;" />

### 字符串是值类型

String 值在传递给方法或者函数的时候会被复制过去 

赋值给常量或者变量的时候也是一样

Swift 编译器优化了字符串使用的资源，实际上拷贝只会在确实需要的时候才进行

```swift
var str: String = "abc"
var str1 = str
print(str == str1)  //true
str += "def"
print(str)          //abcdef
print(str1)         //abc
print(str == str1)  //false
```

### 字符串比较

- 字符串和字符相等性(==和!=) 
- 前缀相等性 hasPrefix(_:) 
- 后缀相等性 hasSuffix(_:)

## Tuple

元组把多个值合并成单一的复合型的值

元组内的值可以是任何类型，并且不必是同一类型

```swift
//定义一个error错误
let error = (1, "没有权限")
print(error.0)
print(error.1)
```

### 元素命名

元组中的每一个元素可以指定对应的元素名称

如果没有指定名称的元素也可以使用下标的方式来引用

```swift
let error = (errorCode: 1, errorMessage: "没有权限")
print(error.errorCode)
print(error.errorMessage)
```

### Tuple修改

用var定义的元组是可变元组，let定义的是不可变元组

无论是可变还是不可变元组，元组在创建后就不能增加和删除元素

可以对可变元组的元素进行修改，但是不能改变其类型

any类型可以改为任意类型

```swift
var error: (Any, String) = (1, "没有权限")
error.0 = 2
print(error)
error.0 = "adc"
print(error)	
```

```swift
var error: (errorCode: Int, errorMessage: Any) = (errorCode: 1, errorMessage: "没有权限")
error.errorCode = 2
print(error)
error.errorMessage = 3
print(error)
```

### Tuple分解

可以将一个元组的内容分解成单独的常量或变量

如果只需要使用其中的一部分数据，不需要的数据可以用下划线`_`代替

```swift
let error = (1, "没有权限")
let (_, errorMessage) = error
print(errorMessage)
```

### Tuple作为函数返回值

使用Tuple为函数返回多个值

返回值的Tuple可以在函数的返回类型部分被命名

```swift
func writeToFile(conent: String) -> (errorCode: Int, errorMessage: String) {
  return (1, "没有权限")
}
```

