# 推送开关功能

关闭推送

```
[[UIApplication sharedApplication] unregisterForRemoteNotifications];
```
打开推送
```
[JPUSHService registerForRemoteNotificationTypes:(UIUserNotificationTypeBadge | UIUserNotificationTypeSound | UIUserNotificationTypeAlert) categories:nil];
```
判断系统当前的通知开关是否打开
```
[[UIApplication sharedApplication] currentUserNotificationSettings].types == UIUserNotificationTypeNone
```
系统推送没打开的话，跳转到通知设置界面:
```
    NSURL *url = [NSURL URLWithString:UIApplicationOpenSettingsURLString];
    
    if([[UIApplication sharedApplication] canOpenURL:url]) {
        
       [[UIApplication sharedApplication] openURL:url];
        
    }
```
跳转到手机系统通知之后，返回到app需要重新刷新推送开关状态。
在AppDelegate中代理方法中去发通知，通知app设置界面刷新状态。
```
- (void)applicationWillEnterForeground:(UIApplication *)application {
    [[NSNotificationCenter defaultCenter] postNotificationName:kRefreshPushSwitch object:nil];
}
```