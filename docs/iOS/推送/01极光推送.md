# 极光推送的集成：

#### app在前台运行的时候，接收到通知之后会走下面方法：

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo fetchCompletionHandler:(void (^)(UIBackgroundFetchResult result))completionHandler;
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo ;
```
#### 对上面两个方法进行解释：

上面这个是ios 7后新加入的方法，如果实现了上面那个方法，下面这个就会被覆盖掉，不再执行。
上面这个方法有几个特性：当程序在前台运行时，收到远程推送，会立刻调用此方法，但是如果程序在后台挂起，收到消息（未点击推送消息时）并不会执行方法。

如果想在收到消息的时候有需求需要执行一些代码，那么可以让服务器发给APNS时在aps 字典中加入`apn = {content-available = 1;}`这个字段

![image.png](https://upload-images.jianshu.io/upload_images/1892989-1a48a2103c3ad978.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
当应用在后台挂起时接收到推送消息时就会立即执行上面这个方法，当然，当你再点击推送消息时，还会再执行一次（这两种情况可以根据applicationState这个属性区分），而下面这个方法只会在点击推送消息，或者应用在前台运行时接收到消息时才会调用。如果你有需求，当应用在前台运行时接收到推送消息也希望有类似远程推送那样，我想的方法是程序在前台运行，收到推送消息，那么给他转化成本地通知，但是本地通知并不会有横幅提示。如果你也想要这个提示可以自定义一个view来显示。


程序在后台的时候，AppDelegate中的方法都不会走的， 点击通知进入app，会走上面的方法。 跳转、进入指定的页面在这个方法中设置。

app在后台时， 通过点击通知打开进入app， 在上面方法中打断点，在控制台打印`po [UIApplication sharedApplication].applicationState` 输出`UIApplicationStateInactive`  这是从后台进入app的状态。
app在前台运行中的时候，只要不点击通知，就不会走上面的方法。点击通知才会走该方法。在前台运行的时候接收到通知，并点击通知在上面方法中打断点，打印`[UIApplication sharedApplication].applicationState`  输出`UIApplicationStateActive`。
这是app在前台运行的情况的状态。




设置app的角标`[[UIApplication sharedApplication] setApplicationIconBadgeNumber:0];` 这句如果在AppDelegate中实现的话，那么打开app就会清空通知栏中的通知消息。
