# 数据库

## 创建表

```sql
CREATE TABLE IF NOT EXISTS student (
  ‘id’ INT AUTO_INCREMENT PRIMARY KEY AUTOINCREMENT,
  ‘name’ VARCHAR(255) NOT NULL DEFAULT ‘’ COMMENT ‘姓名’,
  ‘age’ TINYINT UNSIGNED NOT NULL DEFAULT 0 COMMENT ‘年龄’,
  ‘Create at’ INT NOT NULL DEFAULT 0 COMMENT ‘新增时间’
) ENGINE=InnoDB DEFAULT CHARSET=UTF8 AUTO_INCREMENT=1001 COMMENT=‘学生表’;
```

- primary key：主键，区分每一条数据，主键的值不能相同。
- autoincrement：自增，修饰的属性在每一次增加数据的时候值都会自动加1。

### 新增字段ALTER

在建表后增加新字段

```sql
ALTER TABLE %@ ADD COLUMN %@ %@
```

## 插入数据insert

```sql
INSERT INTO Students(stu_name, stu_gender, stu_age) VALUES ('哇哈哈','男',23)
```

### 防止重复插入数据

#### 可以使用主键

每个存储的数据结构都有一个唯一的主键，这个主键你可以自己指定，比如用户的uid 不会重复，这就可以作为一个主键，又或者，每个根据时间戳来的消息id 也会重复，也会作为主键，如果不指定主键，则会自动给你配置自增主键。

覆盖数据的依据 一般是根据主键来，速度快，这是一种覆盖方法，可以update 可以replace 主要看你业务需求

另外一种则是可能判断虽然主键不同，但是内容相同的也需要覆盖，这种情况直接查询内容对比然后 update或者replace 

#### 存在的话就更新，不存在的话就插入。

使用`INSERT OR REPLACE`

```sql
INSERT OR REPLACE INTO TABLENAME ('articleID','editDate') VALUES ('1001','20220101')
```

## 删除数据delete

```sql
delete from Students where stu_id = 3
delete from Students where stu_id = 5 and stu_id = 18
```

删除整个表

```sql
drop Table Students
```

删除数据库

```sql
drop Database Students
```

## 更新某一条指定的数据update

```sql
update Students set stu_name = '隔壁老王', stu_age = 25 where stu_id = 7
```

## 查找SELECT

```sql
SELECT * FROM TABLENAME ORDER BY <#字段名#> DESC;

SELECT * FROM TABLENAME WHERE 字段1 = '<#值#>' AND showtime < '1517904068.1524' ORDER BY 字段2 DESC LIMIT 10 OFFSET %d ;
根据字段2倒序排序 查找字段1等于某个值 并且showtime小于1517904068.1524 的数据，并且分页，每页10个。
```

`*`代表所有属性列的内容，如果其中一部分的话需要特别指明 如下的这句

```sql
SELECT stu_name,stu_gender FROM Students
```

删除、修改、查找都可以使用where条件
