# 数据库

## 创建表

```sql
CREATE TABLE IF NOT EXISTS student (
  ‘id’ INT AUTO_INCREMENT PRIMARY KEY AUTOINCREMENT,
  ‘name’ VARCHAR(255) NOT NULL DEFAULT ‘’ COMMENT ‘姓名’,
  ‘age’ TINYINT UNSIGNED NOT NULL DEFAULT 0 COMMENT ‘年龄’,
  ‘Create at’ INT NOT NULL DEFAULT 0 COMMENT ‘新增时间’
) ENGINE=InnoDB DEFAULT CHARSET=UTF8 AUTO_INCREMENT=1001 COMMENT=‘学生表’;
```

- primary key:主键,区分每一条数据，主键的值不能够相同。
- autoincrement：自增，修饰的属性在每一次增加数据的时候值都会自动加1。

### 新增字段

增加新字段, 在建表后还想新增字段使用`ALTER TABLE %@ ADD COLUMN %@ %@`

## 插入数据

```sql
insert into Students(stu_name, stu_gender, stu_age)values('哇哈哈','男',23)
```

### 防止重复插入数据

#### 可以使用主键

每个存储的数据结构都有一个唯一的主键，这个主键你可以自己指定，比如用户的uid 不会重复，这就可以作为一个主键，又或者，每个根据时间戳来的消息id 也会重复，也会作为主键，如果不指定主键，则会自动给你配置自增主键。

覆盖数据的依据 一般是根据主键来，速度快，这是一种覆盖方法，可以update 可以replace 主要看你业务需求

另外一种则是可能判断虽然主键不同，但是内容相同的也需要覆盖，这种情况直接查询内容对比然后 update或者replace 

#### 存在的话就更新，不存在的话就插入。

使用`INSERT OR REPLACE`

```sql
NSString *insertSql= [NSString stringWithFormat:
                                      @"INSERT OR REPLACE INTO %@ ('articleID','editDate') VALUES ('%@','%@')",
                                      tableName,item[@"articleID"],item[@"editDate"]];
```

## 删除数据

//where是条件，可以改。  删除一条数据

```sql
delete from Students where stu_id = 3
delete from Students where stu_id = 5 and stu_id = 18
```

//删除整个表

```sql
drop Table Students
```

//删除数据库

```sql
drop Database Students
```

## 更新某一条指定的数据

```sql
update Students set stu_name = '隔壁老王', stu_age = 25 where stu_id = 7
```

## 查找

```sql
SELECT * FROM TABLENAME ORDER BY <#字段名#> DESC;

SELECT * FROM TABLENAME WHERE type = '<#值#>' ORDER BY dispOrder DESC LIMIT 10 OFFSET <#(n-1) * 10#>;

SELECT * FROM TABLENAME WHERE 字段1 = '%@' ORDER BY 字段2 DESC LIMIT 10 OFFSET %d ;
根据字段2倒序排序 查找字段1等于某个值的数据，并且分页，每页10个。
```

```sql
SELECT * FROM newsTB where isTopNews = '1' and showtime < '1517904068.1524'  order by showtime desc LIMIT 10;
```

解释：
查找数据库中头条的文章，某一个日期之前的10条数据， 整个表所有数据按照日期倒序排列。

### 查询所有数据（属性）

```sql
select * from Students
```

“ * " 代表所有属性列的内容，如果其中一部分的话需要特别指明 如下的这句

```sql
select stu_name,stu_gender from Students
```

### 查询指定的某一条数据

```sql
SELECT * FROM TABLENAME WHERE articleID = '<#值#>';
```

