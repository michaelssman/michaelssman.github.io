# 布局

弹性盒子布局，方向布局，没有设置宽高的话会根据内容撑起宽高

## 布局页面

整体布局，小部件布局，小部件传递数据展示。

简单的widgets构建复杂大型的widgets。

布局思想：小部件布局越简单越好。

## 组件选择逻辑

### 单孩子SingleChildRenderObjectWidget

- 居中Center
- 内边距padding
- 组合型装饰container 容器布局
- 等等

### 多孩子MultiChildRenderObjectWidget

- 多层布局
  - stack层叠布局
- 单层布局
  - flow 流式布局
  - flex弹性布局
  - 等等

## Stack层叠布局

多层布局，主轴是z轴，前 --> 后（内 --> 外）

### Positioned

修改Stack中的部件，使用Positioned，Positioned有left，top，right，bottom4个属性。参数是像素位置，绝对位置。

## Flex弹性布局/填充布局

### Row 横向布局

从左到右

### Column 纵向布局

从上到下

#### mainAxisAlignment主轴

Row是x轴，Column是y轴。

主轴开始位置是main start，结束位置是main end。

- start 从主轴开始的方向对齐。Row是左对齐 Column是上对齐

- end 向主轴结束的方向对齐。Row是右对齐 Column是下对齐

- center 主轴方向居中对齐。

- spaceBetween剩下的空间平均分布到小部件之间。

  ```dart
  Row(
    //主轴时spaceBetween，往两边分散
    mainAxisAlignment: MainAxisAlignment.spaceBetween,
    children: [
      //left
      Container(
        padding: const EdgeInsets.all(10),
        child: Row(
          children: const [
            //图标
            Image(
              image: AssetImage('images/badge.png'),
              width: 20,
            ),
            //间隙
            SizedBox(
              width: 15,
            ),
            //title
            Text("账户："),
            SizedBox(
              width: 5,
            ),
            Text("现金"),
          ],
        ),
      ),
      //right
      Container(
        padding: const EdgeInsets.all(10),
        child: const Image(
          image: AssetImage('images/icon_right.png'),
          width: 15,
        ),
      ),
    ],
  ),
  ```

- spaceAround剩下的空间平均分布到小部件周围。

  部件a的左边右边和部件b的左边右边和部件c的左边右边一样。

- spaceEvenly剩下的空间和小部件一起平分。

​		部件a的左边部件b的左边部件c的左边一样。部件a的右边和部件b的右边和部件c的右边一样。

#### crossAxisAlignment交叉轴

垂直于主轴方向的。Row是y轴，Column是x轴。

交叉轴开始位置是cross start，结束位置是cross end。

- start 向交叉开始的方向对齐
- end 向交叉轴结束的方向对齐
- center 交叉轴方向居中对齐
- stretch 填满交叉轴方向
- baseline 文字 底部对齐
  - 需要配合文件的基准线`textBaseline: TextBaseline.alphabetic,`

### VerticalDirection定义子节点的摆放顺序

默认是down从上到下进行摆放，up是从下到上进行摆放。

#### Expanded填充布局

Expanded：自动拉伸。**主轴方向不会剩下间隙**，将被Expanded包装的部件进行拉伸和压缩，不够用的时候自动换行（文字自动换行）。横竖屏会使用到。

- 主轴如果是横向的：设置height有用，width没有意义。
- 主轴如果是竖着的：设置height没有意义，width有用。

每一个UI部件都可以看成一个矩形的盒子，每一个盒子都有外边距Margin和内边距padding。

```dart
padding: const EdgeInsets.all(30),//内边距
margin: const EdgeInsets.all(20),//外边距
//margin: const EdgeInsets.only(left: 5, right: 5, top: 20),
```

`Expanded`使用与类似与Column，Row，Flex等展示多个组件集合的组件，Expanded包含的组件可以占据剩余的空间。

![img](https:////upload-images.jianshu.io/upload_images/6898044-90e9c7b0cef4a534.png?imageMogr2/auto-orient/strip|imageView2/2/w/393/format/webp)

类似上图效果，在一个Row组件里面展示3个Container组件，固定了后两个组件的宽高，第一个组件就撑满屏幕，占据剩余的控件。

```dart
Row(
  mainAxisAlignment: MainAxisAlignment.end,
  mainAxisSize: MainAxisSize.max,
  children: <Widget>[
    Expanded(// Expanded包一下，可以撑满剩余空间
      child: Container(
        color: Colors.amber,
        height: 100,
      ),
    ),
    Container(
      width: 50,
      height: 100,
      color: Colors.red,
    ),
    Container(
      width: 50,
      height: 100,
      color: Colors.cyan,
    )
  ],
),
```

## 部件的alignment属性

可以定位 

范围：-1.0到1.0

x=0 y=0为中心

## AspectRatio 宽高比

它的设置影响父部件。

如果父部件宽高都给了，就无效了。**宽高只给一个时有效**。

AspectRatio里面不要再写子部件了。

## 刘海屏

Flutter官方针对子部件已经默认适配了刘海屏 上下左右都有适配屏幕。

如果想顶上去可以使用MediaQuery.removePadding里面有removeTop
