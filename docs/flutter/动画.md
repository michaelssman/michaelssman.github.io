# 动画

### 内置的全自动隐式动画控件

```dart
curve: Curves.linear,//线性变换（可以修改各种曲线）
```

#### AnimatedContainer动画盒子

```dart
class Demo extends StatefulWidget {
  const Demo({Key? key}) : super(key: key);

  @override
  State<Demo> createState() => _DemoState();
}

class _DemoState extends State<Demo> {
  double _height = 300;
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('Demo'),
      ),
      body: Center(
        ///只对AnimatedContainer自己的属性参数改变有动画，对child的改变没有动画
        child: AnimatedContainer(
          width: 300,
          height: _height,
          // color: Colors.blue,
          //持续时间
          duration: const Duration(milliseconds: 500),
          child: const Center(
            child: Text(
              'Hi',
              style: TextStyle(fontSize: 72),
            ),
          ),
          decoration: BoxDecoration(
            //渐变色
            gradient: const LinearGradient(
              begin: Alignment.bottomCenter,
              end: Alignment.topCenter,
              colors: [Colors.orange, Colors.white],

              ///哪个地方有过渡动画
              stops: [0.2, 0.3],
            ),
            //边框
            boxShadow: const [BoxShadow(spreadRadius: 25, blurRadius: 25)],
            //圆角
            borderRadius: BorderRadius.circular(150),
          ),
        ),
      ),
      floatingActionButton: FloatingActionButton(
        onPressed: () {
          setState(() {
            _height += 100;
            if (_height > 500) _height = 200;
          });
        },
        tooltip: 'change',
        child: Icon(Icons.add),
      ),
    );
  }
}
```

#### AnimatedSwitcher

不同控件之间切换的过渡动画

```dart
class _DemoState extends State<Demo> {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('Demo'),
      ),
      body: const Center(
        child: AnimatedSwitcher(
          duration: Duration(seconds: 10),
          child: Center(
            child: CircularProgressIndicator(),
          ), //Image.network("https://i.imgur.com/9tvsYY0.png"),
        ),
      ),
    );
  }
}
```

#### AnimatedOpacity

```dart
class _DemoState extends State<Demo> {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('Demo'),
      ),
      body: Center(
        child: AnimatedOpacity(
          opacity: 0.5,
          duration: const Duration(milliseconds: 500),
          child: Container(
            width: 300,
            height: 300,
            color: Colors.red,
          ),
        ),
      ),
    );
  }
}
```

#### AnimatedPadding

```dart
class _DemoState extends State<Demo> {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('Demo'),
      ),
      body: AnimatedPadding(
        curve: Curves.linear,
        duration: const Duration(milliseconds: 500),
        padding: const EdgeInsets.all(0),
        child: Container(
          width: 300,
          height: 300,
          color: Colors.red,
        ),
      ),
    );
  }
}
```

### TweenAnimationBuilder补间动画

内置的不够时，使用补间动画。

`tween:`意思就是between之间 例如0~1，类似关键帧。1s有60帧

```dart
TweenAnimationBuilder(
  //程序刚开始的时候begin有意义，之后再变化的时候就是从当前的值到end
  tween: Tween(begin: 0.0, end: 1.0),
  
  duration: const Duration(milliseconds: 500), 
  
  //在时间内，不断的叫下面的build函数，value是不断变化的（begin~end）
  //简单的控件，里面是child。复杂的时候（例：ListView里面是bulid）
  builder: (BuildContext context, value, Widget? child) {
    return Opacity(
      opacity: value,
      child: Container(
        width: 300,
        height: 300,
        color: Colors.red,
      ),
    );
  },
),
```

```dart
class _DemoState extends State<Demo> {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('Demo'),
      ),
      body: Center(
        child: TweenAnimationBuilder(
          tween: Tween(begin: 0.0, end: 1.0),
          duration: const Duration(milliseconds: 500), 
          builder: (BuildContext context, double value, Widget? child) {
            return Opacity(
              opacity: value,
              child: Container(
                width: 300,
                height: 300,
                color: Colors.red,
              ),
            );
          },
        ),
      ),
    );
  }
}
```

### Transform

#### Transform.scale缩放

```dart
class _DemoState extends State<Demo> {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('Demo'),
      ),
      body: Center(
        child: TweenAnimationBuilder(
          tween: Tween(begin: 1.0, end: 1.2), 
          duration: const Duration(milliseconds: 500),
          builder: (BuildContext context, double value, Widget? child) {
            return Container(
              width: 300,
              height: 300,
              color: Colors.red,
              child: Center(
                child: Transform.scale(
                  //4X4矩阵
                  scale: value,
                  child: const Text(
                    'hi',
                    style: TextStyle(fontSize: 72),
                  ),
                ),
              ),
            );
          },
        ),
      ),
    );
  }
}
```

#### Transform.rotate旋转

```dart
class _DemoState extends State<Demo> {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('Demo'),
      ),
      body: Center(
        child: TweenAnimationBuilder(
          tween: Tween(begin: 0.0, end: 6.28), 
          duration: const Duration(milliseconds: 500),
          builder: (BuildContext context, double value, Widget? child) {
            return Container(
              width: 300,
              height: 300,
              color: Colors.red,
              child: Center(
                child: Transform.rotate(
                  //0~2Π 6.28
                  angle: value,
                  child: const Text(
                    'hi',
                    style: TextStyle(fontSize: 72),
                  ),
                ),
              ),
            );
          },
        ),
      ),
    );
  }
}
```

#### Transform.translate平移

```dart
class _DemoState extends State<Demo> {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('Demo'),
      ),
      body: Center(
        child: TweenAnimationBuilder(
          tween: Tween(
              begin: const Offset(0.0, -10.0),
              end: const Offset(20.0, 0.0)),
          duration: const Duration(milliseconds: 500),
          builder: (BuildContext context, Offset value, Widget? child) {
            return Container(
              width: 300,
              height: 300,
              color: Colors.red,
              child: Center(
                child: Transform.translate(
                  //横坐标和纵坐标位移多少单位
                  offset: value,
                  child: const Text(
                    'hi',
                    style: TextStyle(fontSize: 72),
                  ),
                ),
              ),
            );
          },
        ),
      ),
    );
  }
}
```

## 显式（手动控制）动画

### 无尽旋转的显示动画

```dart
//SingleTickerProviderStateMixin获取设备垂直同步
class _DemoState extends State<Demo> with SingleTickerProviderStateMixin {
  late AnimationController _controller;
  @override
  void initState() {
    _controller = AnimationController(
      duration: const Duration(milliseconds: 500),
      vsync: this,
    );
    super.initState();
  }

  @override
  void dispose() {
    _controller.dispose();
    super.dispose();
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('Demo'),
      ),
      body: Center(
        child: RotationTransition(
          turns: _controller, //0.5就是半圈
          child: const Icon(
            Icons.refresh,
            size: 100,
          ),
        ),
      ),
      floatingActionButton: FloatingActionButton(
        onPressed: () {
          setState(() {
            // _controller.forward();//转一圈
            _controller.repeat(); //重复转
            // _controller.reset(); //回到原来的状态
            // _controller.stop();//原地停止
          });
        },
        tooltip: 'change',
        child: const Icon(Icons.add),
      ),
    );
  }
}
```

### 动画控制器



## 其他动画